pre-commit:
  parallel: true
  commands:
    goimports:
      glob: "*.go"
      run: goimports -w {staged_files}
      stage_fixed: true

    golangci-lint:
      glob: "*.go"
      run: golangci-lint run --fix {staged_files}
      stage_fixed: true

    swift-format:
      glob: "*.swift"
      run: swift-format -i {staged_files}
      stage_fixed: true

commit-msg:
  commands:
    gitmoji-check:
      run: |
        # Check if commit message starts with a gitmoji
        MSG=$(cat {1})
        # Common gitmoji patterns (emoji or :code: format)
        if ! echo "$MSG" | head -1 | grep -qE "^([\x{1F300}-\x{1F9FF}]|:[a-z_]+:)"; then
          echo "Error: Commit message must start with a Gitmoji"
          echo "Examples:"
          echo "  ‚ú® Add new feature"
          echo "  üêõ Fix bug"
          echo "  üìù Update documentation"
          echo ""
          echo "See https://gitmoji.dev for more"
          exit 1
        fi
